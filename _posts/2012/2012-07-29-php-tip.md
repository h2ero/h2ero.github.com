---
layout: post
title: 拾遗
tags: php javascript
categories: php
---
+ strip_tags除了用于过滤不要的标签也可用于截取html后过滤掉未闭合的tag
+ javascript html_strip [这样](http://stackoverflow.com/questions/822452/strip-html-from-text-javascript)实现
	{% highlight javascript linenos %}
		function strip(html)
		{
		   var tmp = document.createElement("DIV");
		   tmp.innerHTML = html;
		   return tmp.textContent||tmp.innerText;
		}
	{% endhighlight %}
+ 匹配url正则表达式 [在线正则表达式测试工具](http://regexpal.com/)
	{% highlight bash linenos %}
		(https?|ftp|telnet):\/\/((?:[a-z0-9@:.-]|%[0-9A-F]{2}){3,})(?::(\d+))?((?:\/(?:[a-z0-9-._~!$&'()*+,;=:@]|%[0-9A-F]{2})*)*)(?:\?((?:[a-z0-9-._~!$&'()*+,;=:\/?@]|%[0-9A-F]{2})*))?(?:#((?:[a-z0-9-._~!$&'()*+,;=:\/?@]|%[0-9A-F]{2})*))?
	{% endhighlight %}
	{% highlight php linenos %}
	<?php
		//带www和http的生成链接
		function text2url($text){
					$pattern="/((?:https?):\/\/)?((?:[a-z0-9@:.-]|%[0-9A-F]{2}){3,})(?::(\d+))?((?:\/(?:[a-z0-9-._~!$&'()*+,;=:@]|%[0-9A-F]{2})*)*)(?:\?((?:[a-z0-9-._~!$&'()*+,;=:\/?@]|%[0-9A-F]{2})*))?(?:#((?:[a-z0-9-._~!$&'()*+,;=:\/?@]|%[0-9A-F]{2})*))?/iS";
					preg_match_all($pattern, $text, $matches);
					foreach ($matches[0] as $url){
						if($url){
							$search[]=$url;
							$replace[]='<a target="_blank" href=http://'.str_replace('http://','',$url).'>'.$url.'</a>';
						}
					}
					return str_replace($search, $replace, $text);
				}
	{% endhighlight %}
