<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>vim | h2ero</title>
  <meta name="author" content="h2ero">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="h2ero"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="h2ero" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">h2ero</a></h1>
  <h2><a href="/"></a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
      <li><a href="/about">About</a></li>
    
      <li><a href="/link">Link</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper">
<h2 class="archive-title tag">vim</h2>


  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2013-01-29T04:41:08.000Z"><a href="/2013/01/29/2013/2013-01-29-vim-php-code-format-and-php-convention-code-style/">Jan 29 2013</a></time>
      
      
  
    <h1 class="title"><a href="/2013/01/29/2013/2013-01-29-vim-php-code-format-and-php-convention-code-style/">PHP编码规范及Vim PHP 代码格式化实现</a></h1>
  

    </header>
    <div class="entry">
      
        <p>最近对Vim进行各种折腾，现在又上了一层。敲PHP总是有很多地方要空格隔开。所以按照<a href="http://kohanaframework.org/3.0/guide/kohana/conventions" title="kohana" target="_blank">Kohana文档中的编程规范</a>来写了个脚本。写这个脚本把Vim的正则表达式用的非常熟了。功能简单就是加最简单的空格。主要还是用在自己敲代码的时候。基本上的类型就是下面这些了。</p>
<h3 id="格式化类型">格式化类型</h3>
<figure class="highlight php"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
</pre></td><td class="code"><pre><span class="preprocessor">&lt;?php</span> 
<span class="comment">//判断</span>
<span class="keyword">if</span>(<span class="variable">$foo</span>==<span class="string">'bar'</span>)     
<span class="keyword">if</span> (<span class="variable">$foo</span> == <span class="string">'bar'</span>)

<span class="comment">//赋值</span>
<span class="variable">$foo</span>=<span class="string">'bar'</span>;
<span class="variable">$foo</span> = <span class="string">'bar'</span>;

<span class="comment">//否定</span>
<span class="keyword">if</span> (!<span class="variable">$foo</span>)
<span class="keyword">if</span> ( ! <span class="variable">$foo</span>)

<span class="comment">//三元加其他运算符</span>
<span class="variable">$foo</span>=((<span class="variable">$bar</span>&gt;<span class="number">5</span>)?(<span class="variable">$bar</span>+<span class="variable">$foo</span>):strlen(<span class="variable">$bar</span>))?Help::<span class="variable">$foo</span>%<span class="number">5</span>:<span class="variable">$bar</span>%<span class="number">7</span>;
<span class="variable">$foo</span> = ((<span class="variable">$bar</span>&gt;<span class="number">5</span>) ? (<span class="variable">$bar</span> + <span class="variable">$foo</span>) : strlen(<span class="variable">$bar</span>)) ? Hleper::<span class="variable">$foo</span> % <span class="number">5</span> : <span class="variable">$bar</span> % <span class="number">7</span>;

<span class="comment">//强制转换</span>
<span class="variable">$foo</span>=(string)<span class="variable">$bar</span>;
<span class="variable">$foo</span> = (string) <span class="variable">$bar</span>;

<span class="comment">//判断内有强制转换</span>
<span class="keyword">if</span>((string)<span class="variable">$bar</span>)
<span class="keyword">if</span> ( (string) <span class="variable">$bar</span>)

<span class="comment">//括号中有,</span>
preg_replace(<span class="string">'/(\d+) dollar/'</span>,<span class="string">'$1 euro'</span>,<span class="variable">$str</span>);
preg_replace(<span class="string">'/(\d+) dollar/'</span>, <span class="string">'$1 euro'</span>, <span class="variable">$str</span>);

<span class="comment">//条件符号</span>
<span class="keyword">if</span>((<span class="variable">$foo</span>&&<span class="variable">$bar</span>)||(<span class="variable">$b</span>&&<span class="variable">$c</span>))
<span class="keyword">if</span> ((<span class="variable">$foo</span> && <span class="variable">$bar</span>) || (<span class="variable">$b</span> && <span class="variable">$c</span>))

<span class="comment">//数组</span>
<span class="variable">$arr</span>=<span class="keyword">array</span>(<span class="string">'key'</span>=&gt;<span class="keyword">array</span>(<span class="string">'key'</span>=&gt;<span class="string">'value'</span>+<span class="string">'value2'</span>))
<span class="variable">$arr</span> = <span class="keyword">array</span>(<span class="string">'key'</span> =&gt; <span class="keyword">array</span>(<span class="string">'key'</span> =&gt; <span class="string">'value'</span> + <span class="string">'value2'</span>))

<span class="comment">//运算符</span>
<span class="variable">$a</span>+=<span class="variable">$b</span>/<span class="variable">$c</span>-<span class="variable">$d</span>;
<span class="variable">$a</span> += <span class="variable">$b</span> / <span class="variable">$c</span> - <span class="variable">$d</span>;

<span class="comment">//逻辑英文操作符</span>
<span class="keyword">if</span>(<span class="number">1</span>and2or3xor4)
<span class="keyword">if</span> (<span class="number">1</span> <span class="keyword">AND</span> <span class="number">2</span> <span class="keyword">OR</span> <span class="number">3</span> <span class="keyword">XOR</span> <span class="number">4</span>)
</pre></td></tr></table></figure>

<h3 id="难点">难点</h3>
<p>整个脚本用了了10多条正则，用到了正则中的环视和贪婪。不支持这两个特性的正则都是不完美的。</p>
<ol>
<li>对于字符串中有转义又有要替换的情况，如<code>“h2ero=h2eros \&quot;##\&quot;##”</code>格式化的时候会将引号中的要替换的类型都给替换掉，如果要排除这些的话需要在10多条正则中都添加，解决是先匹配处是字符串的类型然后替换为STR0，STR1等，并保存到list里面。然后在所有类型替换完后在替换回去,这是最难的地方。</li>
<li>要格式化是在每一次回车的时候继续格式化，也就是说边敲边格式化。不过vim正则替换完后都是会改变光标的位置，然后回车就失效了。解决是先执行回车保留本来的行为，然后在取上一行进行替换。</li>
<li>转义’这个是第一个问题中遇到的一个问题。当pattern为’regex’的时候regex里面包含有‘的话需要使用两个’‘进行转义而不是\’。</li>
<li>Vim正则语法比较难，不过正则思想都一样。</li>
</ol>
<h3 id="使用">使用</h3>
<p>没有写为插件的形式，直接复制下面代码保存。然后在.vimrc中添加以下代码<code>:source ~/.vim/script/phpformat.vim</code> 最后一行只会对php文件生效。然后每次敲完一行代码回车就会格式化好。</p>
<figure class="highlight viml"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
</pre></td><td class="code"><pre>"format code
"http://kohanaframework.org/3.3/guide/kohana/conventions

func! Add_space()
    let now_line = line('.')
    "exec "inoremap &lt;CR&gt; &lt;CR&gt;"
    exec "normal! a<span class="command">\&lt;</span>CR&gt;<span class="command">\&lt;</span>Esc&gt;"
    let n_line = getline(now_line)

    " str replace
    let strlist = <span class="special">[</span><span class="special">]</span>
    let flag = 0
    let index= 0
    while flag == 0
        let replacelist = matchlist(n_line, '<span class="command">\(</span><span class="special">[</span>''"<span class="special">]</span><span class="command">\)</span><span class="command">\{</span>1<span class="special">}</span><span class="command">\(</span>.<span class="command">\{</span>-<span class="special">}</span><span class="command">\)</span><span class="command">\\</span><span class="command">\@</span>&lt;!\1<span class="command">\{</span>1<span class="special">}</span>')
        if len(replacelist) == 0 
            let flag = 1
        else
            let rstr = replacelist<span class="special">[</span>1<span class="special">]</span>.replacelist<span class="special">[</span>2<span class="special">]</span>.replacelist<span class="special">[</span>1<span class="special">]</span>
            call add(strlist,<span class="special">[</span>'STR'.index,rstr<span class="special">]</span>)
            let n_line = substitute(n_line,rstr,'STR'.index,'')
            let index+=1
        endif
    endwhile


    " 1.  =+*&lt;-<span class="comment">%/ exclude =&gt; != !== .= += &lt;= </span>
    let n_line = substitute(n_line,'<span class="command">\s*</span><span class="command">\(</span>!<span class="command">\|</span>!=<span class="command">\|</span>+=<span class="command">\|</span>&lt;=<span class="command">\|</span><span class="command">\.</span><span class="command">\)</span><span class="command">\@</span>&lt;!<span class="command">\(</span><span class="special">[</span><span class="comment">%/=*+&lt;-]\+[&gt;]\@!\)\s*',' \2 ','g')</span>

    " 2.  ,                eg : array('a' =&gt; 'b', 'c' =&gt; 'd')
    let n_line = substitute(n_line,'<span class="command">\s*</span><span class="command">\(</span><span class="special">[</span>,<span class="special">]</span><span class="command">\+</span><span class="command">\)</span><span class="command">\s*</span>','\1 ','g')

    " 3.  ()               eg : if ( <span class="formula">$foo )  exclude define('') 
    let n_line = substitute(n_line,'<span class="command">\(</span>if<span class="command">\|</span>for<span class="command">\|</span>foreach<span class="command">\|</span>switch<span class="command">\)</span><span class="command">\@</span>&lt;=<span class="command">\s*</span><span class="command">\(</span><span class="special">[</span>(<span class="special">]</span><span class="command">\+</span><span class="command">\)</span><span class="command">\(</span>.<span class="command">\{</span>-<span class="special">}</span><span class="command">\)</span><span class="command">\(</span><span class="special">[</span>)<span class="special">]</span><span class="command">\+</span><span class="command">\)</span><span class="command">\s*</span>',' \2\3\4 ','g')

    " 4.  =&gt;               eg : array('a' =&gt; 'b', 'c' =&gt; 'd')
    let n_line = substitute(n_line,'<span class="command">\s*</span><span class="command">\(</span>=&gt;<span class="command">\)</span><span class="command">\s*</span>',' \1 ','g')

    " 5.  + - * /  exclude ++ --
    "let n_line = substitute(n_line,'<span class="command">\s*</span><span class="command">\(</span><span class="special">[</span>-<span class="special">]</span><span class="command">\{</span>2,<span class="special">}</span><span class="command">\)</span><span class="command">\s*</span>','\1','g')

    " 6.  != !== += .=     eg : if ($</span>foo !== FALSE)  <span class="formula">$a += 5;
    let n_line = substitute(n_line,'<span class="command">\s*</span><span class="command">\(</span>!=<span class="command">\+</span><span class="command">\|</span>+=<span class="command">\|</span><span class="command">\.</span>=<span class="command">\|</span>&lt;=<span class="command">\)</span><span class="command">\s*</span>',' \1 ','g')

    " 7.  (!               eg : if ( ! $</span>foo)
    let n_line = substitute(n_line,'<span class="command">\s*</span><span class="special">[</span>(<span class="special">]</span><span class="command">\@</span>&lt;=<span class="command">\(</span>!<span class="command">\)</span><span class="command">\s*</span>',' \1 ','g')

    " 8.  || <span class="special">&</span><span class="special">&</span>            eg : if ((<span class="formula">$foo <span class="special">&</span><span class="special">&</span> $</span>bar) || (<span class="formula">$b <span class="special">&</span><span class="special">&</span> $</span>c))
    let n_line = substitute(n_line,'<span class="command">\s*</span><span class="command">\(</span><span class="special">&</span><span class="special">&</span><span class="command">\|</span>||<span class="command">\)</span><span class="command">\s*</span>',' \1 ','g')

    " 9.  (int)            eg : if ( (int) <span class="formula">$foo) in up regex will replace it like if((int) $</span>foo), follow will fix it.
    let n_line = substitute(n_line,'<span class="command">\s*</span>(<span class="command">\(</span>int<span class="command">\|</span>bool<span class="command">\|</span>float<span class="command">\|</span>string<span class="command">\|</span>binary<span class="command">\|</span>array<span class="command">\|</span>object<span class="command">\|</span>unset<span class="command">\)</span>)<span class="command">\s*</span>',' (\1) ','g')

    " 10.  ?:              eg : <span class="formula">$foo = $</span>bar ? <span class="formula">$foo : $</span>bar;
    let n_line = substitute(n_line,'<span class="command">\s*</span><span class="command">\(</span>?<span class="command">\)</span><span class="command">\s*</span><span class="command">\(</span>.<span class="command">\{</span>-<span class="special">}</span><span class="command">\)</span><span class="command">\s*</span><span class="command">\(</span>:<span class="command">\)</span><span class="command">\s*</span>',' \1 \2 \3 ','g')

    " 11. for(;;)          eg : for(<span class="formula">$i = 0; $</span>i &lt; 100; <span class="formula">$i++) 
    let n_line = substitute(n_line,'<span class="command">\(</span>for<span class="command">\s</span>(<span class="command">\)</span><span class="command">\@</span>&lt;=<span class="command">\(</span><span class="special">[</span>^;<span class="special">]</span>*<span class="command">\)</span><span class="command">\(</span>;<span class="command">\)</span><span class="command">\(</span><span class="special">[</span>^;<span class="special">]</span>*<span class="command">\)</span><span class="command">\(</span>;<span class="command">\)</span>','\2\3 \4\5 ','g')
    
    "let n_line = substitute(n_line,'<span class="command">\s*</span><span class="command">\(</span>for(<span class="command">\)</span><span class="command">\@</span>&lt;=.*<span class="command">\s*</span><span class="command">\(</span>;<span class="command">\)</span>.*<span class="command">\s*</span>','\2 ','g')

    "let n_line=substitute(n_line,'<span class="command">\s*</span><span class="command">\(</span><span class="special">[</span>=+<span class="special">]</span><span class="command">\+</span><span class="command">\)</span><span class="command">\s*</span>',' \1 ','g')

    " str restore
    let index = len(strlist) - 1
    while len(strlist) &gt; 0
        let n_line = substitute(n_line,strlist<span class="special">[</span>index<span class="special">]</span><span class="special">[</span>0<span class="special">]</span>,strlist<span class="special">[</span>index<span class="special">]</span><span class="special">[</span>1<span class="special">]</span>,'')
        unlet strlist<span class="special">[</span>index<span class="special">]</span>
        let index-=1
    endwhile

    call setline(now_line,n_line)
    "exec now_line."s/<span class="command">\\</span><span class="command">\s*</span><span class="command">\\</span><span class="command">\(</span><span class="special">[</span>=+<span class="special">]</span><span class="command">\\</span><span class="command">\+</span><span class="command">\\</span><span class="command">\)</span><span class="command">\\</span><span class="command">\s*</span>/ <span class="command">\\</span>1 /ge"
    "exec "inoremap &lt;CR&gt; &lt;Esc&gt;:call Add_space()&lt;CR&gt;"

endfunc

func! PHP_space()
    let now_line = line( '.' )
    let n_line = getline(now_line)
    let html = matchstr(n_line, '^<span class="command">\s*</span><span class="special">[</span>&lt;.<span class="special">#</span><span class="special">]</span>')
    if empty(html) 
        call Add_space()
    else
        exec "normal! <span class="command">\&lt;</span>ESC&gt;a<span class="command">\&lt;</span>CR&gt;"
        echo "this is html"
        "throw "no url recognized into ``".n_line."''"
    endif
endfunc

":inoremap &lt;CR&gt; &lt;Esc&gt;:call Add_space()&lt;CR&gt;
"inoremap &lt;CR&gt; &lt;Esc&gt;:call Add_space()&lt;CR&gt;
au FileType php inoremap &lt;CR&gt; &lt;Esc&gt;:call PHP_space()&lt;CR&gt;</span>
</pre></td></tr></table></figure>

<h3 id="PHP编程规范">PHP编程规范</h3>
<p>整理来着网上和kohana，zend framework框架的编程约定代码规范。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
</pre></td><td class="code"><pre><span class="preprocessor">&lt;?php</span>
<span class="comment">//一般变量 形容词_名词,变量范围正则[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*</span>
<span class="variable">$new_payment</span>

<span class="comment">//函数/方法 动词+名词，函数方法空行隔开</span>
get_username()

<span class="comment">//多参数加空格</span>
get_message(<span class="variable">$id</span>, <span class="variable">$count</span>, <span class="variable">$date</span>)

<span class="comment">//语法关键字后加空格</span>
<span class="keyword">if</span> (<span class="variable">$foo</span>)

<span class="comment">//函数括号后不加空格</span>
strlen(<span class="string">'h2ero'</span>)

<span class="comment">//花括号</span>
<span class="keyword">if</span> (<span class="variable">$foo</span>)
{
	
}
<span class="comment">//SQL关键词大写</span>
<span class="variable">$sql</span> = <span class="string">"h2ero"</span>

<span class="comment">//类型转换空格</span>
<span class="variable">$foo</span> = (string) <span class="variable">$foo</span>;


<span class="comment">//变量在前，真假在后</span>
<span class="keyword">if</span> (<span class="variable">$foo</span> !== <span class="keyword">FALSE</span>)

<span class="comment">//使用AND，OR代替&& ||</span>
<span class="keyword">if</span> ((<span class="variable">$foo</span> <span class="keyword">AND</span> <span class="variable">$bar</span>) <span class="keyword">OR</span> (<span class="variable">$b</span> <span class="keyword">AND</span> <span class="variable">$c</span>))

<span class="comment">//实例化</span>
<span class="variable">$db</span> = <span class="keyword">new</span> Database;
<span class="comment">//而不是,除了有构造方法的情况。</span>
<span class="variable">$db</span> = <span class="keyword">new</span> Database();

<span class="comment">//其他情况</span>
<span class="keyword">if</span> ( ! <span class="variable">$foo</span>)
</pre></td></tr></table></figure>

<p><i class="os_date"><br>System Version: OS X 10.8 (12A269) Kernel Version: Darwin 12.0.0<br>2013-01-29 12:41:08<br></i></p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2012-09-04T16:00:00.000Z"><a href="/2012/09/05/2012/2012-09-05-vim-align-plugin-chinese-instruction/">Sep 5 2012</a></time>
      
      
  
    <h1 class="title"><a href="/2012/09/05/2012/2012-09-05-vim-align-plugin-chinese-instruction/">vim 对齐插件algin</a></h1>
  

    </header>
    <div class="entry">
      
        <p>转回头折腾很久前的，这下是所有的都给清空了，重新配置了下。现在觉得主要不是JAVA,.NET,其他语言都该用vim。<br>现在安装的插件就下面这些了，基本上的功能都实现了。<br>    /home/h2ero/.vim<br>    ├── autoload<br>    │   └── pathogen.vim<br>    └── bundle<br>        ├── align<br>        ├── conque<br>        ├── markdown<br>        ├── nerdtree<br>        ├── powerline<br>        ├── pydiction<br>        ├── pydoc<br>        ├── pyflakes<br>        ├── snipmate<br>        ├── syntastic<br>        ├── taglist<br>        ├── VisIncr<br>        └── zencoding-vim<br>其中的vim align很强大，<br>    var i=233,a=332<br>    var b=2,c=2<br>先设置对其方式:AlignCtrl r (右对齐) 选中后,输入 :Align = ,就可以对齐=和,。<br>    var i = 233 , a = 332<br>    var b = 2   , c = 2<br>如果不想选中的话可以直接:1,2Aligin =对目标代码所在行直接进行对齐,上面的，虽然对齐了不过却有一定的宽度。那么可以:AlignCtrl lp0P0,p为分割符前面的padding值，P是后面的，然后再:1,2Algin ,<br>    var  i  =  233,a  =  332<br>    var  b  =    2,c  =    2<br>其他高级功能看手册吧，其实想实现的是Mysql consloe中的table，用markdown写博客，table不好弄的。先要的效果就像下面这样。<br>     +——————-+—————————+——————————-+———————————+<br>     |   Original  | AlignCtrl = = + -| AlignCtrl = =       | AlignCtrl C = + -    |<br>     +——————-+—————————+——————————-+———————————+<br>     |a = b + c - d|a = b + c - d     |a = b + c - d        |a = b         + c - d |<br>     |x = y = z + 2|x = y = z + 2     |x = y         = z + 2|x = y = z     + 2     |<br>     |w = s - t = 0|w = s - t = 0     |w = s - t     = 0    |w = s - t = 0         |<br>     +——————-+—————————+——————————-+———————————+<br> 先建立<br>    | id | username | password |<br>    ||||<br>然后对齐<br>    | id | username | password |<br>    |    |          |          |<br>然后替换<code>:s/|/+/g</code>   <code>:s/\s/-/g</code>目前就是这样实现的了，看了一emacs对齐的才强大。<br>    +——+—————+—————+<br>    | id | username | password |<br>    +——+—————+—————+<br>不过要先输入数据后再进行对齐替换。</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2012-09-03T16:00:00.000Z"><a href="/2012/09/04/wiki/2012-09-04-vim-wiki/">Sep 4 2012</a></time>
      
      
  
    <h1 class="title"><a href="/2012/09/04/wiki/2012-09-04-vim-wiki/">VIM</a></h1>
  

    </header>
    <div class="entry">
      
        <h1 id="VIM">VIM</h1>
<h2 id="编辑">编辑</h2>
<h3 id="常用">常用</h3>
<p>C 改变改行后面部分相当于c$<br>ci” ci’ ci( ci&lt; 同vi’<br>== 修复行缩进<br>C-A 递增数字</p>
<h3 id="补全">补全</h3>
<p>整行补全                        CTRL-X CTRL-L<br>根据当前文件里关键字补全        CTRL-X CTRL-N<br>根据字典补全                    CTRL-X CTRL-K<br>根据同义词字典补全              CTRL-X CTRL-T<br>根据头文件内关键字补全          CTRL-X CTRL-I<br>根据标签补全                    CTRL-X CTRL-]<br>补全文件名                      CTRL-X CTRL-F<br>补全宏定义                      CTRL-X CTRL-D<br>补全vim命令                     CTRL-X CTRL-V<br>用户自定义补全方式              CTRL-X CTRL-U<br>拼写建议                        CTRL-X CTRL-S </p>
<h2 id="搜索">搜索</h2>
<ul>
<li>搜索当前光标位置下的单词</li>
</ul>
<h2 id="移动">移动</h2>
<p>‘. 跳转到上一次编辑的行<br>g; 跳转到最后一次修改的位置</p>
<h2 id="Vim_Visual_Mode">Vim Visual Mode</h2>
<p>vi{ 选中{}中间的内容,不包括{}<br>va{ 选中{}中间内容，包括{}<br>vi( 选中()中间内容<br>vi&lt; 选中&lt;&gt;中间内容<br>vi[ 选中[]中间内容<br>vit 选中中间的内容<br>vi” 选中””中间内容<br>vi’ 选中”中间的内容<br>vis 选中一个句子<br>vib 选中一个block<br>viw选中一个单词<br>vip 选中一个段落 </p>
<h2 id="其他">其他</h2>
<ul>
<li>vim file +cmd 打开文件执行命令 vim file +123</li>
<li>v% 选中括号内容</li>
<li>g8 显示utf8编码</li>
<li>:set rtp 显示runtimepath</li>
<li>:set ft=html 设置filetype</li>
<li>ZZ :wq ZQ :q!</li>
</ul>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2011-04-11T16:00:00.000Z"><a href="/2011/04/12/2011/2011-04-12-vim-tip/">Apr 12 2011</a></time>
      
      
  
    <h1 class="title"><a href="/2011/04/12/2011/2011-04-12-vim-tip/">vim命令拾遗</a></h1>
  

    </header>
    <div class="entry">
      
        <figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
</pre></td><td class="code"><pre>H M L 移动光标到屏幕的上<span class="regexp">/中/</span>下
* 读取光标处的字符串 移动到再次出现的地方 <span class="comment"># 为反向</span>
| 移动列
+<span class="regexp">/- 移动到下/</span>上N行非空白字符前
(<span class="regexp">/）移动到上/</span>下一个句子
Ctrl+u/d 上下翻页 相当于pagedown pageup
Ctrl+f/b 下上一屏

Ctrl+i<span class="regexp">/o 跳转到较早/</span>较晚的地方，
:marks  列出所有的标记
m{a-zA-Z}	用标记 {a-zA-Z} 记录当前位置
`<span class="javascript">{a-z}		至当前文件中的标记 {a-z}
</span>`{A-Z}		至任何文件中的标记 {A-Z}
`<span class="javascript">{<span class="number">0</span>-<span class="number">9</span>}		至 Vim 上次退出的位置
</span>``<span class="javascript">			至上次跳转之前的位置
</span>`<span class="string">"			至上次编辑此文件的位置
`[			至上次被操作或放置的文本的开始
`]			至上次被操作或放置的文本的结尾
`&lt;			至 (前次) 可视区域的开始
`&gt;			至 (前次) 可视区域的结尾
`.			至当前文件最后被改动的位置

d 删除 dd dw de(不包括空格) d$ d^ d2as  “aw”一个单词（a word）、”as”一个句子（a sentence）、”ap”一个段落（a paragraph）
i 插入  6if esc 插入6个f，css中常用
U 撤销所有
Ctrl+R 撤销撤销的
cw 改变单词部分或者全部c$/^改变行尾或行首
% 匹配(){}[]等等
: (%这个文件替换)s/replaced/replaced（/g全行替换/c询问用户替换）
:#,#s/old/new/g (两行中间替换)
Ctrl+N/P 关键词自动补全 前提输入过的
Ctrl+g 显示文件所在位置，和光标所在位置
w 保存 #,#w filename 保存部分行
r 读取文件进来
set xxx 设置 xxx 选项 如 set ic /set hls is
q/ q? 显示搜索命令历史的窗口
C-z fg或者:sh exit 切换到shell
guw 将光标所在的单词变为小写
guw 将光标所在的单词变为小写
gUw 将光标所在的单词变为大写
guu 光标所在的行所有字符变为小写
gUU 光标所在的行所有字符变为大写
g~~ 光标所在的行所有字符大小写反向转换
:1,$!sort 将文件内的所有内容排序
ga 显示光标所在字符的内码（包括十进制码，十六进制码以及八进制码）
Shift-k 查找光标所在命令或函数的 man 帮助
q: 显示命令行命令历史的窗口
:help 帮助
gR gr 替换保持布局
&lt;&lt; &gt;&gt; 左右移动
&gt;3j 下面三行右移动
V以行开始高亮
gv高亮上次高亮的</span>
</pre></td></tr></table></figure>


      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  

  <nav id="pagination">
  
  
  <div class="clearfix"></div>
</nav>
</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Search">
    <input type="hidden" name="q" value="site:blog.h2ero.cn">
  </form>
</div>

  
<div class="widget tag">
  <h3 class="title">Categories</h3>
  <ul class="entry">
  
    <li><a href="/categories/PHP/">PHP</a><small>1</small></li>
  
    <li><a href="/categories/SQL/">SQL</a><small>1</small></li>
  
    <li><a href="/categories/hack/">hack</a><small>1</small></li>
  
    <li><a href="/categories/linux/">linux</a><small>9</small></li>
  
    <li><a href="/categories/mac/">mac</a><small>1</small></li>
  
    <li><a href="/categories/mysql/">mysql</a><small>1</small></li>
  
    <li><a href="/categories/note/">note</a><small>1</small></li>
  
    <li><a href="/categories/php/">php</a><small>8</small></li>
  
    <li><a href="/categories/plugin/">plugin</a><small>1</small></li>
  
    <li><a href="/categories/self/">self</a><small>3</small></li>
  
    <li><a href="/categories/tip/">tip</a><small>1</small></li>
  
    <li><a href="/categories/vim/">vim</a><small>1</small></li>
  
    <li><a href="/categories/web/">web</a><small>5</small></li>
  
    <li><a href="/categories/wiki/">wiki</a><small>5</small></li>
  
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">Tags</h3>
  <ul class="entry">
  
    <li><a href="/tags/CSS3/">CSS3</a><small>1</small></li>
  
    <li><a href="/tags/Godaddy/">Godaddy</a><small>1</small></li>
  
    <li><a href="/tags/GoogleAnalytics/">GoogleAnalytics</a><small>1</small></li>
  
    <li><a href="/tags/IE6/">IE6</a><small>1</small></li>
  
    <li><a href="/tags/MSSQL/">MSSQL</a><small>1</small></li>
  
    <li><a href="/tags/Mac/">Mac</a><small>1</small></li>
  
    <li><a href="/tags/MySQL/">MySQL</a><small>1</small></li>
  
    <li><a href="/tags/PHP/">PHP</a><small>2</small></li>
  
    <li><a href="/tags/Postfix/">Postfix</a><small>1</small></li>
  
    <li><a href="/tags/SMTP/">SMTP</a><small>1</small></li>
  
    <li><a href="/tags/SQL/">SQL</a><small>1</small></li>
  
    <li><a href="/tags/Ubuntu/">Ubuntu</a><small>1</small></li>
  
    <li><a href="/tags/Vim/">Vim</a><small>1</small></li>
  
    <li><a href="/tags/Youtube/">Youtube</a><small>1</small></li>
  
    <li><a href="/tags/Zend Studio/">Zend Studio</a><small>1</small></li>
  
    <li><a href="/tags/algin/">algin</a><small>1</small></li>
  
    <li><a href="/tags/apache/">apache</a><small>1</small></li>
  
    <li><a href="/tags/aptana/">aptana</a><small>1</small></li>
  
    <li><a href="/tags/awesom/">awesom</a><small>1</small></li>
  
    <li><a href="/tags/awesome/">awesome</a><small>1</small></li>
  
    <li><a href="/tags/codeigniter/">codeigniter</a><small>3</small></li>
  
    <li><a href="/tags/compression/">compression</a><small>1</small></li>
  
    <li><a href="/tags/convention/">convention</a><small>1</small></li>
  
    <li><a href="/tags/css/">css</a><small>2</small></li>
  
    <li><a href="/tags/dedecms/">dedecms</a><small>1</small></li>
  
    <li><a href="/tags/eclipse/">eclipse</a><small>1</small></li>
  
    <li><a href="/tags/firefox/">firefox</a><small>1</small></li>
  
    <li><a href="/tags/firegestures script/">firegestures script</a><small>1</small></li>
  
    <li><a href="/tags/framework/">framework</a><small>1</small></li>
  
    <li><a href="/tags/ftp/">ftp</a><small>1</small></li>
  
    <li><a href="/tags/fuelphp/">fuelphp</a><small>1</small></li>
  
    <li><a href="/tags/fulltext/">fulltext</a><small>1</small></li>
  
    <li><a href="/tags/git/">git</a><small>1</small></li>
  
    <li><a href="/tags/greasemonkey/">greasemonkey</a><small>1</small></li>
  
    <li><a href="/tags/h2ero/">h2ero</a><small>2</small></li>
  
    <li><a href="/tags/id_rsa.pub/">id_rsa.pub</a><small>1</small></li>
  
    <li><a href="/tags/jQuery/">jQuery</a><small>1</small></li>
  
    <li><a href="/tags/jVi/">jVi</a><small>1</small></li>
  
    <li><a href="/tags/javascript/">javascript</a><small>3</small></li>
  
    <li><a href="/tags/love/">love</a><small>1</small></li>
  
    <li><a href="/tags/loveYou/">loveYou</a><small>1</small></li>
  
    <li><a href="/tags/mac/">mac</a><small>1</small></li>
  
    <li><a href="/tags/markdown/">markdown</a><small>1</small></li>
  
    <li><a href="/tags/mysql/">mysql</a><small>1</small></li>
  
    <li><a href="/tags/netbens/">netbens</a><small>1</small></li>
  
    <li><a href="/tags/newBlog/">newBlog</a><small>1</small></li>
  
    <li><a href="/tags/newLift/">newLift</a><small>1</small></li>
  
    <li><a href="/tags/php/">php</a><small>2</small></li>
  
    <li><a href="/tags/plugin/">plugin</a><small>1</small></li>
  
    <li><a href="/tags/scp/">scp</a><small>1</small></li>
  
    <li><a href="/tags/search/">search</a><small>1</small></li>
  
    <li><a href="/tags/shell/">shell</a><small>1</small></li>
  
    <li><a href="/tags/ssh/">ssh</a><small>1</small></li>
  
    <li><a href="/tags/terminator/">terminator</a><small>1</small></li>
  
    <li><a href="/tags/transform/">transform</a><small>1</small></li>
  
    <li><a href="/tags/ubuntu/">ubuntu</a><small>2</small></li>
  
    <li><a href="/tags/uploadify/">uploadify</a><small>1</small></li>
  
    <li><a href="/tags/url rewrite/">url rewrite</a><small>1</small></li>
  
    <li><a href="/tags/vim/">vim</a><small>4</small></li>
  
    <li><a href="/tags/vimL/">vimL</a><small>1</small></li>
  
    <li><a href="/tags/vimscript/">vimscript</a><small>1</small></li>
  
    <li><a href="/tags/virtulhost/">virtulhost</a><small>1</small></li>
  
    <li><a href="/tags/vrapper/">vrapper</a><small>1</small></li>
  
    <li><a href="/tags/vsftpd/">vsftpd</a><small>1</small></li>
  
    <li><a href="/tags/wine/">wine</a><small>1</small></li>
  
    <li><a href="/tags/xev/">xev</a><small>1</small></li>
  
    <li><a href="/tags/xfce/">xfce</a><small>1</small></li>
  
    <li><a href="/tags/xmodmap/">xmodmap</a><small>1</small></li>
  
    <li><a href="/tags/you/">you</a><small>1</small></li>
  
    <li><a href="/tags/存储过程/">存储过程</a><small>1</small></li>
  
    <li><a href="/tags/油猴子/">油猴子</a><small>1</small></li>
  
    <li><a href="/tags/索引/">索引</a><small>1</small></li>
  
  </ul>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2014 h2ero
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<script type="text/javascript">
var disqus_shortname = 'h2ero';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>